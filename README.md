# Ciência de Dados para Segurança - Classificação de Malwares

* Esse repositório contém arquivos para realizar o processo de Ciência de Dados no conjunto de dados disponibilizado pela Universidade de New Brunswick (UNB), chamado de [CIC-AndMal2017](https://www.unb.ca/cic/datasets/andmal2017.html).

* Os dados contêm dois tipos de arquivos (PCAPs e APKs), que estão associados à 4 classes diferentes de malwares:
  * Adware
  * Scareware
  * Ransomware
  * SMS Malware
  
* Além dessas classes, o conjunto de dados contêm amostras benignas dos anos de 2015, 2016 e 2017, totalizando 5 classes.

## Extração de Dados (PCAPs e APKs)
* Esse projeto contém códigos para realizar a extração de características dos dois tipos de dados brutos (PCAPs e APKs) e organizá-las em uma tabela no formato CSV com 481 características de 20.000 amostras rotuladas.
* Para os dados do tipo PCAP, 82 características foram extraídas utilizando a ferramenta [CICFlowMeter](https://github.com/ahlashkari/CICFlowMeter) e, em seguida, foram rotuladas utilizando as informações disponibilizadas pela UNB e organizadas em uma planilha CSV.
* Já os arquivos de APKs foram tratados com a ferramenta [APKTool](https://ibotpeaches.github.io/Apktool/) para obter o arquivo _AndroidManifest.xml_ de cada APK utilizando o processo de engenharia reversa.
* Com esse arquivo foi possível extrair as permissões requeridas por cada APK e montar uma lista booleana, marcando com 1 as permissões existentes em uma determinada APK, e 0 no caso de ausência dessa permissão.
* Essas listas foram adicionados à tabela criada inicialmente, associando elas aos PCAPs correspondentes.

## Balanceamento de Classes
* O arquivo CSV resultante da extração de dados apresentou um desbalanceamento de classes, com a classe SMS Malware contendo 212.084 amostras enquanto a benigna contava com 902.583 amostras.
* Para solucionar este problema, 4.000 amostras, escolhidas aleatoriamente, foram selecionadas de cada classe, totalizando um conjunto de dados final de 20.000 amostras. Essas amostras podem ser conferidas [aqui](class_balanced_csvs_apks).
* A tabela final acabou ficando muito extensa, por isso não foi adicionada ao repositório.

## Divisão do Dados
* Os dados foram divididos em conjuntos de treinamento e teste da seguinte forma:
 * **Conjunto de treinamento:** 80% dos dados
 * **Conjunto de teste:** 20% dos dados
